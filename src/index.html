<!DOCTYPE html>
<html>

<head>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link href="http://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.8/css/materialize.min.css" />
  <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.8/angular.js"></script>
  <script type="text/javascript" src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.8/js/materialize.min.js"></script>
  <script type="text/javascript" src="./scripts/inverted-index.js"></script>
  <script type="text/javascript" src="./scripts/app.js"></script>
  <title> Inverted Index</title>
</head>


<body ng-app="myIndex" ng-controller="indexController">

  <nav class="light-blue lighten-1" role="navigation">
    <div class="nav-wrapper container"><a id="logo-container" href="#" class="brand-logo">Inverted Index</a>
  </nav>

  <div class="container">
    <nav>
      <div class="nav-wrapper">
        <form ng-submit="search()">
          <div class="input-field">
            <input id="search" ng-model="terms" type="search" required>
            <label for="search"><i class="material-icons">search</i></label>
            <i class="material-icons">close</i>
          </div>
        </form>
      </div>
    </nav>


    <div class="row">
      <form action="#">
        <p ng-repeat="title in titles">
          <label for="{{title}}"><i class="material-icons">folder</i>{{title}}</label>
        </p>
      </form>
      <div>
        <select class="browser-default" ng-model="selectedFile" >
                  <option value="" disabled selected>Select a File</option>
                  <option ng-repeat="title in titles" value="{{title}}">{{title}}</option>
                  <option value="all"  ng-if="titles.length > 1"> All files</option>
         </select>
      </div>
    </div>



    <div class="row">
      <div class="col s12 m8 l3">
        <form>
          <div class="file-field input-field">
            <div class="btn btn-small">
              <span>Upload JSON</span>
              <input type="file" id="uploadJSON">
            </div>
            <div class="file-path-wrapper">
              <input class="file-path validate" type="text" value="Import a JSON file" accept="json">
            </div>
          </div>
          <div class="divider"></div>
          <div class="row">
            <p class="right-align"><button class="btn btn-small waves-effect waves-light" type="button" ng-click="createIndex(uploadJSON)">Create Index</button></p>
          </div>
          <button data-target="modal1" class="btn modal-trigger">Modal</button>
          <div id="modal1" class="modal">
            <div class="modal-content">
              <h4>Failure</h4>
              <p>Wrong File Format</p>
            </div>
            <div class="modal-footer">
              <a href="#!" class=" modal-action modal-close waves-effect waves-green btn-flat">Ok</a>
            </div>
          </div>
        </form>
      </div>
      <div class="col s12 m8 l9">
        <table ng-if="!docCount == 0" ng-show="showTable">
          <thead>
            <tr>
              <th> Keywords</th>
              <th ng-repeat="fileNo in docCount">Document {{fileNo}}</th>
            </tr>
          </thead>
          <tbody>
            <tr ng-repeat="(key, value) in data">
              <td class="divider"> {{key}}</td>
              <td ng-repeat="fileNo in docCount">
                <i ng-if="value.includes(fileNo.toString())" class="material-icons">clear</i>
              </td>
            </tr>
          </tbody>
        </table>
      </div>

      <div class="col s12 m8 l9">
        <table ng-show="searchResults">
          <thead>
              <th> Search Results for {{selectedFile}}</th>
            <tr>
              <th> Keywords</th>
              <th ng-repeat="fileNo in docCount">Document {{fileNo}}</th>
            </tr>
          </thead>
          <tbody>
            <tr ng-repeat="(key, value) in searchResult">
              <td>{{key}}</td>
              <td  ng-repeat="fileNo in docCount">
                <i ng-if="value.includes(fileNo.toString())" class="material-icons">clear</i>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>



</body>

</html>